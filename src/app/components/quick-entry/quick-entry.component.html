<div *ngIf="!challenges" class="h-full w-full flex justify-center items-center">
  <span class="loading loading-spinner loading-lg text-dark-lavender"></span>
</div>
<div *ngIf="challenges" class="w-full h-full flex flex-col justify-center items-center">
  <p *ngIf="challenges.length === 0">Pas de challenge en cours.</p>
  <p class="text-dark-lavender text-center pb-2 font-medium">Est-ce que j'ai réussi à {{challenges[currentChallenge].name}} ?</p>
  <form *ngIf="challenges.length > 0" [formGroup]="entryForm" (ngSubmit)="sendEntry()" class="w-5/6 flex flex-col justify-center items-center">
    <label *ngIf="isText()" class="w-full input-w-icon rounded-3xl">
      Réponse :
      <input type="text" class="input-underline w-full" placeholder="..." formControlName="textResponse">
      <p *ngIf="entryForm?.controls?.textResponse?.touched && entryForm?.controls?.textResponse?.errors?.['required']" class="error">Dites au moins quelques mots.</p>
    </label>

    <label *ngIf="isNumber()" class="w-full input-w-icon rounded-3xl">
      Réponse :
      <input type="text" class="number input-underline" placeholder="..." formControlName="numberResponse">
      <p *ngIf="entryForm?.controls?.numberResponse?.touched && entryForm?.controls?.numberResponse?.errors?.['required']" class="error">Vous devez écrire un nombre pour valider.</p>
      <p *ngIf="entryForm?.controls?.numberResponse?.touched && entryForm?.controls?.numberResponse?.errors?.['pattern']" class="error">Vous devez entrer un nombre (ex: 12.5).</p>
    </label>

    <div *ngIf="isEmojis()" class="w-full h-16 emoji-selector rounded-3xl">
      <app-icon *ngFor="let emoji of challenges[currentChallenge].entryTypes" (click)="updateEmojisUnique(emoji)" [pathData]="emoji.value" [ngClass]="{'emoji-button-selected':  this.emojiSelected(emoji)}" class="emoji-button"></app-icon>
    </div>
    <p *ngIf="submittedAndInvalid && !entryForm.value.emojiResponse" class="error -mt-3">Sélectionnez un émoji.</p>

    <button type="submit" class="button-dc mt-2 w-1/3">Valider</button>
  </form>
</div>
